"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/metrics/route";
exports.ids = ["app/api/metrics/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shishany_Documents_tschetschenische_dating_app_meetmate_admin_app_api_metrics_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/metrics/route.ts */ \"(rsc)/./app/api/metrics/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/metrics/route\",\n        pathname: \"/api/metrics\",\n        filename: \"route\",\n        bundlePath: \"app/api/metrics/route\"\n    },\n    resolvedPagePath: \"/Users/shishany/Documents/tschetschenische-dating-app/meetmate-admin/app/api/metrics/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shishany_Documents_tschetschenische_dating_app_meetmate_admin_app_api_metrics_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/metrics/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZXRyaWNzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtZXRyaWNzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWV0cmljcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNoaXNoYW55JTJGRG9jdW1lbnRzJTJGdHNjaGV0c2NoZW5pc2NoZS1kYXRpbmctYXBwJTJGbWVldG1hdGUtYWRtaW4lMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGc2hpc2hhbnklMkZEb2N1bWVudHMlMkZ0c2NoZXRzY2hlbmlzY2hlLWRhdGluZy1hcHAlMkZtZWV0bWF0ZS1hZG1pbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNkM7QUFDMUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWV0bWF0ZS1hZG1pbi8/NjQxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2hpc2hhbnkvRG9jdW1lbnRzL3RzY2hldHNjaGVuaXNjaGUtZGF0aW5nLWFwcC9tZWV0bWF0ZS1hZG1pbi9hcHAvYXBpL21ldHJpY3Mvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL21ldHJpY3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tZXRyaWNzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tZXRyaWNzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NoaXNoYW55L0RvY3VtZW50cy90c2NoZXRzY2hlbmlzY2hlLWRhdGluZy1hcHAvbWVldG1hdGUtYWRtaW4vYXBwL2FwaS9tZXRyaWNzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9tZXRyaWNzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/metrics/route.ts":
/*!**********************************!*\
  !*** ./app/api/metrics/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   revalidate: () => (/* binding */ revalidate)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase-server */ \"(rsc)/./lib/supabase-server.ts\");\n\n\nconst EU_CODES = [\n    \"AL\",\n    \"AD\",\n    \"AM\",\n    \"AT\",\n    \"AZ\",\n    \"BY\",\n    \"BE\",\n    \"BA\",\n    \"BG\",\n    \"HR\",\n    \"CY\",\n    \"CZ\",\n    \"DK\",\n    \"EE\",\n    \"FI\",\n    \"FR\",\n    \"GE\",\n    \"DE\",\n    \"GR\",\n    \"HU\",\n    \"IS\",\n    \"IE\",\n    \"IT\",\n    \"KZ\",\n    \"XK\",\n    \"LV\",\n    \"LI\",\n    \"LT\",\n    \"LU\",\n    \"MT\",\n    \"MD\",\n    \"MC\",\n    \"ME\",\n    \"NL\",\n    \"MK\",\n    \"NO\",\n    \"PL\",\n    \"PT\",\n    \"RO\",\n    \"SM\",\n    \"RS\",\n    \"SK\",\n    \"SI\",\n    \"ES\",\n    \"SE\",\n    \"CH\",\n    \"TR\",\n    \"UA\",\n    \"GB\",\n    \"VA\"\n];\nconst toRadians = (value)=>value * Math.PI / 180;\nconst haversine = (lat1, lon1, lat2, lon2)=>{\n    const R = 6371;\n    const dLat = toRadians(lat2 - lat1);\n    const dLon = toRadians(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n};\nconst GROZNY_LAT = 43.3189;\nconst GROZNY_LNG = 45.6981;\nconst CHECHNYA_RADIUS_KM = 130;\nconst resolveRegion = (country, lat, lng)=>{\n    if (typeof lat === \"number\" && typeof lng === \"number\") {\n        const distance = haversine(lat, lng, GROZNY_LAT, GROZNY_LNG);\n        if (distance <= CHECHNYA_RADIUS_KM) return \"chechnya\";\n    }\n    if (country?.toUpperCase() === \"RU\") return \"russia\";\n    if (country && EU_CODES.includes(country.toUpperCase())) return \"europe\";\n    return \"other\";\n};\nconst isChechnyaName = (value)=>{\n    if (!value) return false;\n    const normalized = value.toLowerCase();\n    return normalized.includes(\"grozn\") || normalized.includes(\"грозн\") || normalized.includes(\"chechn\") || normalized.includes(\"чеч\");\n};\n// Minimal geohash encoder (5 chars precision) for grouping\nconst BASE32 = \"0123456789bcdefghjkmnpqrstuvwxyz\";\nconst encodeGeohash = (lat, lon, precision = 5)=>{\n    let idx = 0;\n    let bit = 0;\n    let evenBit = true;\n    let geohash = \"\";\n    let latMin = -90, latMax = 90;\n    let lonMin = -180, lonMax = 180;\n    while(geohash.length < precision){\n        if (evenBit) {\n            const lonMid = (lonMin + lonMax) / 2;\n            if (lon >= lonMid) {\n                idx = idx * 2 + 1;\n                lonMin = lonMid;\n            } else {\n                idx = idx * 2;\n                lonMax = lonMid;\n            }\n        } else {\n            const latMid = (latMin + latMax) / 2;\n            if (lat >= latMid) {\n                idx = idx * 2 + 1;\n                latMin = latMid;\n            } else {\n                idx = idx * 2;\n                latMax = latMid;\n            }\n        }\n        evenBit = !evenBit;\n        bit++;\n        if (bit === 5) {\n            geohash += BASE32.charAt(idx);\n            bit = 0;\n            idx = 0;\n        }\n    }\n    return geohash;\n};\nasync function GET() {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.getSupabaseServerClient)();\n    const [{ data: metrics, error: metricsError }, { data: euProfiles, error: euError }, { data: otherProfiles, error: otherError }, { count: matchesCount, error: matchesError }, { data: allLocations, error: locationsError }, { data: reportsRaw, error: reportsError }] = await Promise.all([\n        supabase.rpc(\"admin_profile_metrics\"),\n        supabase.from(\"profiles\").select(\"country\").in(\"country\", EU_CODES),\n        supabase.from(\"profiles\").select(\"country\").not(\"country\", \"is\", null).not(\"country\", \"in\", `(${EU_CODES.join(\",\")},RU)`),\n        supabase.from(\"matches\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        }),\n        supabase.from(\"profiles\").select(\"country, latitude, longitude, city, district, birthday, gender\"),\n        supabase.from(\"events\").select(\"props, created_at, user_id\").eq(\"name\", \"report_profile\").order(\"created_at\", {\n            ascending: false\n        }).limit(500)\n    ]);\n    if (metricsError || euError || otherError || matchesError || locationsError || reportsError) {\n        const message = metricsError?.message || euError?.message || otherError?.message || matchesError?.message || locationsError?.message || reportsError?.message || \"Failed to load metrics\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n    const countryCounts = Object.entries((euProfiles ?? []).reduce((acc, row)=>{\n        const code = row.country ?? \"unknown\";\n        acc[code] = (acc[code] ?? 0) + 1;\n        return acc;\n    }, {})).map(([country, count])=>({\n            country,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const otherCountryCounts = Object.entries((otherProfiles ?? []).reduce((acc, row)=>{\n        const code = row.country ?? \"unknown\";\n        acc[code] = (acc[code] ?? 0) + 1;\n        return acc;\n    }, {})).map(([country, count])=>({\n            country,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const gender = {\n        male: metrics?.gender?.male ?? 0,\n        female: metrics?.gender?.female ?? 0,\n        nonbinary: metrics?.gender?.nonbinary ?? 0,\n        unknown: metrics?.gender?.unknown ?? 0\n    };\n    const platform = {\n        ios: metrics?.platform?.ios ?? 0,\n        android: metrics?.platform?.android ?? 0\n    };\n    const regions = {\n        ingushetia: metrics?.regions?.ingushetia ?? 0,\n        chechnya: metrics?.regions?.chechnya ?? 0,\n        russia: metrics?.regions?.russia ?? 0,\n        europe: metrics?.regions?.europe ?? 0,\n        other: metrics?.regions?.other ?? 0\n    };\n    const topFemale = Array.isArray(metrics?.top_female) ? metrics.top_female : [];\n    const topMale = Array.isArray(metrics?.top_male) ? metrics.top_male : [];\n    const locations = (allLocations ?? []).map((row)=>{\n        const lat = typeof row.latitude === \"number\" ? row.latitude : null;\n        const lng = typeof row.longitude === \"number\" ? row.longitude : null;\n        const baseRegion = resolveRegion(row.country, lat, lng);\n        const regionAdjusted = baseRegion === \"russia\" && (isChechnyaName(row.city) || isChechnyaName(row.district)) ? \"chechnya\" : baseRegion;\n        return {\n            ...row,\n            region: regionAdjusted\n        };\n    });\n    const geohashByRegion = locations.reduce((acc, row)=>{\n        const lat = typeof row.latitude === \"number\" ? row.latitude : null;\n        const lng = typeof row.longitude === \"number\" ? row.longitude : null;\n        if (lat === null || lng === null) {\n            return acc;\n        }\n        const region = row.region ?? resolveRegion(row.country, lat, lng);\n        const geohash = encodeGeohash(lat, lng, 5);\n        if (!acc[region]) acc[region] = [];\n        const bucket = acc[region].find((b)=>b.geohash === geohash);\n        if (bucket) {\n            bucket.count += 1;\n        } else {\n            acc[region].push({\n                geohash,\n                count: 1\n            });\n        }\n        return acc;\n    }, {});\n    Object.keys(geohashByRegion).forEach((key)=>{\n        geohashByRegion[key] = geohashByRegion[key].sort((a, b)=>b.count - a.count);\n    });\n    const cityCountsAll = Object.entries(locations.reduce((acc, row)=>{\n        if (!row.city) return acc;\n        acc[row.city] = (acc[row.city] ?? 0) + 1;\n        return acc;\n    }, {})).map(([city, count])=>({\n            city,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const districtCountsAll = Object.entries(locations.reduce((acc, row)=>{\n        if (!row.district) return acc;\n        acc[row.district] = (acc[row.district] ?? 0) + 1;\n        return acc;\n    }, {})).map(([district, count])=>({\n            district,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const cityCountsEurope = Object.entries(locations.reduce((acc, row)=>{\n        const code = row.country?.toUpperCase() ?? null;\n        if (!code || !EU_CODES.includes(code)) return acc;\n        if (!row.city) return acc;\n        acc[row.city] = (acc[row.city] ?? 0) + 1;\n        return acc;\n    }, {})).map(([city, count])=>({\n            city,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const districtCountsEurope = Object.entries(locations.reduce((acc, row)=>{\n        const code = row.country?.toUpperCase() ?? null;\n        if (!code || !EU_CODES.includes(code)) return acc;\n        if (!row.district) return acc;\n        acc[row.district] = (acc[row.district] ?? 0) + 1;\n        return acc;\n    }, {})).map(([district, count])=>({\n            district,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const cityCountsOther = Object.entries(locations.reduce((acc, row)=>{\n        const code = row.country?.toUpperCase() ?? null;\n        if (!code || EU_CODES.includes(code) || code === \"RU\") return acc;\n        if (!row.city) return acc;\n        acc[row.city] = (acc[row.city] ?? 0) + 1;\n        return acc;\n    }, {})).map(([city, count])=>({\n            city,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const districtCountsOther = Object.entries(locations.reduce((acc, row)=>{\n        const code = row.country?.toUpperCase() ?? null;\n        if (!code || EU_CODES.includes(code) || code === \"RU\") return acc;\n        if (!row.district) return acc;\n        acc[row.district] = (acc[row.district] ?? 0) + 1;\n        return acc;\n    }, {})).map(([district, count])=>({\n            district,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const calcAge = (value)=>{\n        if (!value) return null;\n        const birthday = new Date(value);\n        if (Number.isNaN(birthday.getTime())) return null;\n        const today = new Date();\n        let age = today.getFullYear() - birthday.getFullYear();\n        const m = today.getMonth() - birthday.getMonth();\n        if (m < 0 || m === 0 && today.getDate() < birthday.getDate()) {\n            age--;\n        }\n        return age;\n    };\n    const bucketLabel = (age)=>{\n        if (age === null || age < 0) return \"unknown\";\n        if (age <= 24) return \"18-24\";\n        if (age <= 34) return \"25-34\";\n        if (age <= 44) return \"35-44\";\n        if (age <= 54) return \"45-54\";\n        return \"55+\";\n    };\n    const ageBuckets = Object.entries(locations.reduce((acc, row)=>{\n        const age = calcAge(row.birthday ?? null);\n        const bucket = bucketLabel(age);\n        acc[bucket] = (acc[bucket] ?? 0) + 1;\n        return acc;\n    }, {})).map(([bucket, count])=>({\n            bucket,\n            count\n        })).sort((a, b)=>b.count - a.count);\n    const buildRegionDetail = (regionKey)=>{\n        const rows = locations.filter((row)=>row.region === regionKey);\n        const total = rows.length;\n        const female = rows.filter((r)=>r.gender === \"female\").length;\n        const male = rows.filter((r)=>r.gender === \"male\").length;\n        const ageMap = rows.reduce((acc, r)=>{\n            const age = calcAge(r.birthday ?? null);\n            const bucket = bucketLabel(age);\n            acc[bucket] = (acc[bucket] ?? 0) + 1;\n            return acc;\n        }, {});\n        const cities = Object.entries(rows.reduce((acc, r)=>{\n            if (!r.city) return acc;\n            acc[r.city] = (acc[r.city] ?? 0) + 1;\n            return acc;\n        }, {})).map(([city, count])=>({\n                city,\n                count\n            })).sort((a, b)=>b.count - a.count);\n        const districts = Object.entries(rows.reduce((acc, r)=>{\n            if (!r.district) return acc;\n            acc[r.district] = (acc[r.district] ?? 0) + 1;\n            return acc;\n        }, {})).map(([district, count])=>({\n                district,\n                count\n            })).sort((a, b)=>b.count - a.count);\n        const ageBucketsRegion = Object.entries(ageMap).map(([bucket, count])=>({\n                bucket,\n                count\n            })).sort((a, b)=>b.count - a.count);\n        return {\n            total,\n            female,\n            male,\n            cities,\n            districts,\n            ageBuckets: ageBucketsRegion\n        };\n    };\n    const russiaDetail = buildRegionDetail(\"russia\");\n    const chechnyaDetail = buildRegionDetail(\"chechnya\");\n    const euCountryDetailsMap = (allLocations ?? []).reduce((acc, row)=>{\n        const code = row.country?.toUpperCase() ?? null;\n        if (!code || !EU_CODES.includes(code)) return acc;\n        if (!acc[code]) {\n            acc[code] = {\n                country: code,\n                total: 0,\n                female: 0,\n                male: 0,\n                ageMap: {}\n            };\n        }\n        acc[code].total += 1;\n        if (row.gender === \"female\") acc[code].female += 1;\n        if (row.gender === \"male\") acc[code].male += 1;\n        const age = calcAge(row.birthday ?? null);\n        const bucket = bucketLabel(age);\n        acc[code].ageMap[bucket] = (acc[code].ageMap[bucket] ?? 0) + 1;\n        return acc;\n    }, {});\n    const euCountryDetails = Object.values(euCountryDetailsMap).map((entry)=>({\n            country: entry.country,\n            total: entry.total,\n            female: entry.female,\n            male: entry.male,\n            ageBuckets: Object.entries(entry.ageMap).map(([bucket, count])=>({\n                    bucket,\n                    count\n                })).sort((a, b)=>b.count - a.count)\n        })).sort((a, b)=>b.total - a.total);\n    const deletedAccounts = 0;\n    const otherCountryDetailsMap = (allLocations ?? []).reduce((acc, row)=>{\n        const code = row.country?.toUpperCase() ?? null;\n        if (!code || EU_CODES.includes(code) || code === \"RU\") return acc;\n        if (!acc[code]) {\n            acc[code] = {\n                country: code,\n                total: 0,\n                female: 0,\n                male: 0,\n                ageMap: {}\n            };\n        }\n        acc[code].total += 1;\n        if (row.gender === \"female\") acc[code].female += 1;\n        if (row.gender === \"male\") acc[code].male += 1;\n        const age = calcAge(row.birthday ?? null);\n        const bucket = bucketLabel(age);\n        acc[code].ageMap[bucket] = (acc[code].ageMap[bucket] ?? 0) + 1;\n        return acc;\n    }, {});\n    const otherCountryDetails = Object.values(otherCountryDetailsMap).map((entry)=>({\n            country: entry.country,\n            total: entry.total,\n            female: entry.female,\n            male: entry.male,\n            ageBuckets: Object.entries(entry.ageMap).map(([bucket, count])=>({\n                    bucket,\n                    count\n                })).sort((a, b)=>b.count - a.count)\n        })).sort((a, b)=>b.total - a.total);\n    const reportedUsers = Object.values((reportsRaw ?? []).reduce((acc, row)=>{\n        const props = row.props ?? {};\n        const targetId = props.targetId ?? props.target_id ?? props.targetid ?? props.target ?? props.userId ?? props.user_id ?? null;\n        if (!targetId) {\n            return acc;\n        }\n        const key = String(targetId);\n        const existing = acc[key] ?? {\n            targetId: key,\n            count: 0,\n            lastReportedAt: row.created_at,\n            reporters: new Set()\n        };\n        existing.count += 1;\n        if (!existing.lastReportedAt || new Date(row.created_at) > new Date(existing.lastReportedAt)) {\n            existing.lastReportedAt = row.created_at;\n        }\n        if (row.user_id) {\n            existing.reporters.add(String(row.user_id));\n        }\n        acc[key] = existing;\n        return acc;\n    }, {})).map((item)=>({\n            targetId: item.targetId,\n            count: item.count,\n            lastReportedAt: item.lastReportedAt,\n            reporters: Array.from(item.reporters)\n        })).sort((a, b)=>b.count === a.count ? new Date(b.lastReportedAt).getTime() - new Date(a.lastReportedAt).getTime() : b.count - a.count);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        gender,\n        regions,\n        incognito: metrics?.incognito ?? 0,\n        platform,\n        countryCounts,\n        otherCountryCounts,\n        matches: matchesCount ?? 0,\n        geohashByRegion,\n        cityCountsAll,\n        districtCountsAll,\n        cityCountsEurope,\n        districtCountsEurope,\n        cityCountsOther,\n        districtCountsOther,\n        ageBuckets,\n        euCountryDetails,\n        otherCountryDetails,\n        russiaDetail,\n        chechnyaDetail,\n        topFemale,\n        topMale,\n        deletedAccounts: deletedAccounts ?? 0,\n        reportedUsers\n    }, {\n        headers: {\n            \"Cache-Control\": \"no-store, no-cache, must-revalidate\",\n            Pragma: \"no-cache\",\n            Expires: \"0\"\n        }\n    });\n}\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDZGIsVUFBVWEsS0FBS2IsUUFBUTtZQUN2QjlHLE9BQU8ySCxLQUFLM0gsS0FBSztZQUNqQnNILGdCQUFnQkssS0FBS0wsY0FBYztZQUNuQ0UsV0FBV3ZFLE1BQU12QyxJQUFJLENBQUNpSCxLQUFLSCxTQUFTO1FBQ3RDLElBQ0N6RixJQUFJLENBQUMsQ0FBQzVFLEdBQUc2RSxJQUNSQSxFQUFFaEMsS0FBSyxLQUFLN0MsRUFBRTZDLEtBQUssR0FDZixJQUFJNkUsS0FBSzdDLEVBQUVzRixjQUFjLEVBQUV0QyxPQUFPLEtBQUssSUFBSUgsS0FBSzFILEVBQUVtSyxjQUFjLEVBQUV0QyxPQUFPLEtBQ3pFaEQsRUFBRWhDLEtBQUssR0FBRzdDLEVBQUU2QyxLQUFLO0lBR3pCLE9BQU81RCxxREFBWUEsQ0FBQ2lGLElBQUksQ0FDdEI7UUFDRWE7UUFDQVE7UUFDQWtGLFdBQVduSSxTQUFTbUksYUFBYTtRQUNqQ3JGO1FBQ0FoQjtRQUNBVTtRQUNBNEYsU0FBUzVILGdCQUFnQjtRQUN6QjZEO1FBQ0FPO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FjO1FBQ0FjO1FBQ0FLO1FBQ0FSO1FBQ0FDO1FBQ0FwRDtRQUNBSTtRQUNBcUQsaUJBQWlCQSxtQkFBbUI7UUFDcENHO0lBQ0YsR0FDQTtRQUNFa0IsU0FBUztZQUNQLGlCQUFpQjtZQUNqQkMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7SUFDRjtBQUVKO0FBQ08sTUFBTUMsVUFBVSxnQkFBZ0I7QUFDaEMsTUFBTUMsYUFBYSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVldG1hdGUtYWRtaW4vLi9hcHAvYXBpL21ldHJpY3Mvcm91dGUudHM/ZDE0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlLXNlcnZlclwiO1xuXG5jb25zdCBFVV9DT0RFUyA9IFtcbiAgXCJBTFwiLFwiQURcIixcIkFNXCIsXCJBVFwiLFwiQVpcIixcIkJZXCIsXCJCRVwiLFwiQkFcIixcIkJHXCIsXCJIUlwiLFwiQ1lcIixcIkNaXCIsXCJES1wiLFwiRUVcIixcIkZJXCIsXCJGUlwiLFwiR0VcIixcIkRFXCIsXCJHUlwiLFwiSFVcIixcIklTXCIsXCJJRVwiLFwiSVRcIixcbiAgXCJLWlwiLFwiWEtcIixcIkxWXCIsXCJMSVwiLFwiTFRcIixcIkxVXCIsXCJNVFwiLFwiTURcIixcIk1DXCIsXCJNRVwiLFwiTkxcIixcIk1LXCIsXCJOT1wiLFwiUExcIixcIlBUXCIsXCJST1wiLFwiU01cIixcIlJTXCIsXCJTS1wiLFwiU0lcIixcIkVTXCIsXCJTRVwiLFwiQ0hcIixcIlRSXCIsXCJVQVwiLFwiR0JcIixcIlZBXCJcbl07XG5cbmNvbnN0IHRvUmFkaWFucyA9ICh2YWx1ZTogbnVtYmVyKSA9PiAodmFsdWUgKiBNYXRoLlBJKSAvIDE4MDtcbmNvbnN0IGhhdmVyc2luZSA9IChsYXQxOiBudW1iZXIsIGxvbjE6IG51bWJlciwgbGF0MjogbnVtYmVyLCBsb24yOiBudW1iZXIpID0+IHtcbiAgY29uc3QgUiA9IDYzNzE7XG4gIGNvbnN0IGRMYXQgPSB0b1JhZGlhbnMobGF0MiAtIGxhdDEpO1xuICBjb25zdCBkTG9uID0gdG9SYWRpYW5zKGxvbjIgLSBsb24xKTtcbiAgY29uc3QgYSA9XG4gICAgTWF0aC5zaW4oZExhdCAvIDIpICogTWF0aC5zaW4oZExhdCAvIDIpICtcbiAgICBNYXRoLmNvcyh0b1JhZGlhbnMobGF0MSkpICogTWF0aC5jb3ModG9SYWRpYW5zKGxhdDIpKSAqIE1hdGguc2luKGRMb24gLyAyKSAqIE1hdGguc2luKGRMb24gLyAyKTtcbiAgY29uc3QgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG4gIHJldHVybiBSICogYztcbn07XG5cbmNvbnN0IEdST1pOWV9MQVQgPSA0My4zMTg5O1xuY29uc3QgR1JPWk5ZX0xORyA9IDQ1LjY5ODE7XG5jb25zdCBDSEVDSE5ZQV9SQURJVVNfS00gPSAxMzA7XG5cbmNvbnN0IHJlc29sdmVSZWdpb24gPSAoY291bnRyeT86IHN0cmluZyB8IG51bGwsIGxhdD86IG51bWJlciB8IG51bGwsIGxuZz86IG51bWJlciB8IG51bGwpID0+IHtcbiAgaWYgKHR5cGVvZiBsYXQgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGxuZyA9PT0gXCJudW1iZXJcIikge1xuICAgIGNvbnN0IGRpc3RhbmNlID0gaGF2ZXJzaW5lKGxhdCwgbG5nLCBHUk9aTllfTEFULCBHUk9aTllfTE5HKTtcbiAgICBpZiAoZGlzdGFuY2UgPD0gQ0hFQ0hOWUFfUkFESVVTX0tNKSByZXR1cm4gXCJjaGVjaG55YVwiO1xuICB9XG4gIGlmIChjb3VudHJ5Py50b1VwcGVyQ2FzZSgpID09PSBcIlJVXCIpIHJldHVybiBcInJ1c3NpYVwiO1xuICBpZiAoY291bnRyeSAmJiBFVV9DT0RFUy5pbmNsdWRlcyhjb3VudHJ5LnRvVXBwZXJDYXNlKCkpKSByZXR1cm4gXCJldXJvcGVcIjtcbiAgcmV0dXJuIFwib3RoZXJcIjtcbn07XG5cbmNvbnN0IGlzQ2hlY2hueWFOYW1lID0gKHZhbHVlPzogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICBpZiAoIXZhbHVlKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKFxuICAgIG5vcm1hbGl6ZWQuaW5jbHVkZXMoXCJncm96blwiKSB8fFxuICAgIG5vcm1hbGl6ZWQuaW5jbHVkZXMoXCLQs9GA0L7Qt9C9XCIpIHx8XG4gICAgbm9ybWFsaXplZC5pbmNsdWRlcyhcImNoZWNoblwiKSB8fFxuICAgIG5vcm1hbGl6ZWQuaW5jbHVkZXMoXCLRh9C10YdcIilcbiAgKTtcbn07XG5cbi8vIE1pbmltYWwgZ2VvaGFzaCBlbmNvZGVyICg1IGNoYXJzIHByZWNpc2lvbikgZm9yIGdyb3VwaW5nXG5jb25zdCBCQVNFMzIgPSBcIjAxMjM0NTY3ODliY2RlZmdoamttbnBxcnN0dXZ3eHl6XCI7XG5jb25zdCBlbmNvZGVHZW9oYXNoID0gKGxhdDogbnVtYmVyLCBsb246IG51bWJlciwgcHJlY2lzaW9uID0gNSkgPT4ge1xuICBsZXQgaWR4ID0gMDtcbiAgbGV0IGJpdCA9IDA7XG4gIGxldCBldmVuQml0ID0gdHJ1ZTtcbiAgbGV0IGdlb2hhc2ggPSBcIlwiO1xuICBsZXQgbGF0TWluID0gLTkwLCBsYXRNYXggPSA5MDtcbiAgbGV0IGxvbk1pbiA9IC0xODAsIGxvbk1heCA9IDE4MDtcbiAgd2hpbGUgKGdlb2hhc2gubGVuZ3RoIDwgcHJlY2lzaW9uKSB7XG4gICAgaWYgKGV2ZW5CaXQpIHtcbiAgICAgIGNvbnN0IGxvbk1pZCA9IChsb25NaW4gKyBsb25NYXgpIC8gMjtcbiAgICAgIGlmIChsb24gPj0gbG9uTWlkKSB7XG4gICAgICAgIGlkeCA9IGlkeCAqIDIgKyAxO1xuICAgICAgICBsb25NaW4gPSBsb25NaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZHggPSBpZHggKiAyO1xuICAgICAgICBsb25NYXggPSBsb25NaWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGxhdE1pZCA9IChsYXRNaW4gKyBsYXRNYXgpIC8gMjtcbiAgICAgIGlmIChsYXQgPj0gbGF0TWlkKSB7XG4gICAgICAgIGlkeCA9IGlkeCAqIDIgKyAxO1xuICAgICAgICBsYXRNaW4gPSBsYXRNaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZHggPSBpZHggKiAyO1xuICAgICAgICBsYXRNYXggPSBsYXRNaWQ7XG4gICAgICB9XG4gICAgfVxuICAgIGV2ZW5CaXQgPSAhZXZlbkJpdDtcbiAgICBiaXQrKztcbiAgICBpZiAoYml0ID09PSA1KSB7XG4gICAgICBnZW9oYXNoICs9IEJBU0UzMi5jaGFyQXQoaWR4KTtcbiAgICAgIGJpdCA9IDA7XG4gICAgICBpZHggPSAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2VvaGFzaDtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKTtcblxuICBjb25zdCBbXG4gICAgeyBkYXRhOiBtZXRyaWNzLCBlcnJvcjogbWV0cmljc0Vycm9yIH0sXG4gICAgeyBkYXRhOiBldVByb2ZpbGVzLCBlcnJvcjogZXVFcnJvciB9LFxuICAgIHsgZGF0YTogb3RoZXJQcm9maWxlcywgZXJyb3I6IG90aGVyRXJyb3IgfSxcbiAgICB7IGNvdW50OiBtYXRjaGVzQ291bnQsIGVycm9yOiBtYXRjaGVzRXJyb3IgfSxcbiAgICB7IGRhdGE6IGFsbExvY2F0aW9ucywgZXJyb3I6IGxvY2F0aW9uc0Vycm9yIH0sXG4gICAgeyBkYXRhOiByZXBvcnRzUmF3LCBlcnJvcjogcmVwb3J0c0Vycm9yIH1cbiAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBzdXBhYmFzZS5ycGMoXCJhZG1pbl9wcm9maWxlX21ldHJpY3NcIiksXG4gICAgc3VwYWJhc2UuZnJvbShcInByb2ZpbGVzXCIpLnNlbGVjdChcImNvdW50cnlcIikuaW4oXCJjb3VudHJ5XCIsIEVVX0NPREVTKSxcbiAgICBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcImNvdW50cnlcIilcbiAgICAgIC5ub3QoXCJjb3VudHJ5XCIsIFwiaXNcIiwgbnVsbClcbiAgICAgIC5ub3QoXCJjb3VudHJ5XCIsIFwiaW5cIiwgYCgke0VVX0NPREVTLmpvaW4oXCIsXCIpfSxSVSlgKSxcbiAgICBzdXBhYmFzZS5mcm9tKFwibWF0Y2hlc1wiKS5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiwgaGVhZDogdHJ1ZSB9KSxcbiAgICBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcImNvdW50cnksIGxhdGl0dWRlLCBsb25naXR1ZGUsIGNpdHksIGRpc3RyaWN0LCBiaXJ0aGRheSwgZ2VuZGVyXCIpLFxuICAgIHN1cGFiYXNlXG4gICAgICAuZnJvbShcImV2ZW50c1wiKVxuICAgICAgLnNlbGVjdChcInByb3BzLCBjcmVhdGVkX2F0LCB1c2VyX2lkXCIpXG4gICAgICAuZXEoXCJuYW1lXCIsIFwicmVwb3J0X3Byb2ZpbGVcIilcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQoNTAwKVxuICBdKTtcblxuICBpZiAobWV0cmljc0Vycm9yIHx8IGV1RXJyb3IgfHwgb3RoZXJFcnJvciB8fCBtYXRjaGVzRXJyb3IgfHwgbG9jYXRpb25zRXJyb3IgfHwgcmVwb3J0c0Vycm9yKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICBtZXRyaWNzRXJyb3I/Lm1lc3NhZ2UgfHxcbiAgICAgIGV1RXJyb3I/Lm1lc3NhZ2UgfHxcbiAgICAgIG90aGVyRXJyb3I/Lm1lc3NhZ2UgfHxcbiAgICAgIG1hdGNoZXNFcnJvcj8ubWVzc2FnZSB8fFxuICAgICAgbG9jYXRpb25zRXJyb3I/Lm1lc3NhZ2UgfHxcbiAgICAgIHJlcG9ydHNFcnJvcj8ubWVzc2FnZSB8fFxuICAgICAgXCJGYWlsZWQgdG8gbG9hZCBtZXRyaWNzXCI7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IG1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxuXG4gIGNvbnN0IGNvdW50cnlDb3VudHMgPSBPYmplY3QuZW50cmllcyhcbiAgICAoZXVQcm9maWxlcyA/PyBbXSkucmVkdWNlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KChhY2MsIHJvdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gcm93LmNvdW50cnkgPz8gXCJ1bmtub3duXCI7XG4gICAgICBhY2NbY29kZV0gPSAoYWNjW2NvZGVdID8/IDApICsgMTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pXG4gIClcbiAgICAubWFwKChbY291bnRyeSwgY291bnRdKSA9PiAoeyBjb3VudHJ5LCBjb3VudCB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuXG4gIGNvbnN0IG90aGVyQ291bnRyeUNvdW50cyA9IE9iamVjdC5lbnRyaWVzKFxuICAgIChvdGhlclByb2ZpbGVzID8/IFtdKS5yZWR1Y2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4oKGFjYywgcm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSByb3cuY291bnRyeSA/PyBcInVua25vd25cIjtcbiAgICAgIGFjY1tjb2RlXSA9IChhY2NbY29kZV0gPz8gMCkgKyAxO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSlcbiAgKVxuICAgIC5tYXAoKFtjb3VudHJ5LCBjb3VudF0pID0+ICh7IGNvdW50cnksIGNvdW50IH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG5cbiAgY29uc3QgZ2VuZGVyID0ge1xuICAgIG1hbGU6IG1ldHJpY3M/LmdlbmRlcj8ubWFsZSA/PyAwLFxuICAgIGZlbWFsZTogbWV0cmljcz8uZ2VuZGVyPy5mZW1hbGUgPz8gMCxcbiAgICBub25iaW5hcnk6IG1ldHJpY3M/LmdlbmRlcj8ubm9uYmluYXJ5ID8/IDAsXG4gICAgdW5rbm93bjogbWV0cmljcz8uZ2VuZGVyPy51bmtub3duID8/IDBcbiAgfTtcbiAgY29uc3QgcGxhdGZvcm0gPSB7XG4gICAgaW9zOiAobWV0cmljcyBhcyBhbnkpPy5wbGF0Zm9ybT8uaW9zID8/IDAsXG4gICAgYW5kcm9pZDogKG1ldHJpY3MgYXMgYW55KT8ucGxhdGZvcm0/LmFuZHJvaWQgPz8gMFxuICB9O1xuXG4gIGNvbnN0IHJlZ2lvbnMgPSB7XG4gICAgaW5ndXNoZXRpYTogbWV0cmljcz8ucmVnaW9ucz8uaW5ndXNoZXRpYSA/PyAwLFxuICAgIGNoZWNobnlhOiBtZXRyaWNzPy5yZWdpb25zPy5jaGVjaG55YSA/PyAwLFxuICAgIHJ1c3NpYTogbWV0cmljcz8ucmVnaW9ucz8ucnVzc2lhID8/IDAsXG4gICAgZXVyb3BlOiBtZXRyaWNzPy5yZWdpb25zPy5ldXJvcGUgPz8gMCxcbiAgICBvdGhlcjogbWV0cmljcz8ucmVnaW9ucz8ub3RoZXIgPz8gMFxuICB9O1xuICBjb25zdCB0b3BGZW1hbGUgPSBBcnJheS5pc0FycmF5KChtZXRyaWNzIGFzIGFueSk/LnRvcF9mZW1hbGUpID8gKG1ldHJpY3MgYXMgYW55KS50b3BfZmVtYWxlIDogW107XG4gIGNvbnN0IHRvcE1hbGUgPSBBcnJheS5pc0FycmF5KChtZXRyaWNzIGFzIGFueSk/LnRvcF9tYWxlKSA/IChtZXRyaWNzIGFzIGFueSkudG9wX21hbGUgOiBbXTtcblxuICBjb25zdCBsb2NhdGlvbnMgPSAoYWxsTG9jYXRpb25zID8/IFtdKS5tYXAoKHJvdzogYW55KSA9PiB7XG4gICAgY29uc3QgbGF0ID0gdHlwZW9mIHJvdy5sYXRpdHVkZSA9PT0gXCJudW1iZXJcIiA/IHJvdy5sYXRpdHVkZSA6IG51bGw7XG4gICAgY29uc3QgbG5nID0gdHlwZW9mIHJvdy5sb25naXR1ZGUgPT09IFwibnVtYmVyXCIgPyByb3cubG9uZ2l0dWRlIDogbnVsbDtcbiAgICBjb25zdCBiYXNlUmVnaW9uID0gcmVzb2x2ZVJlZ2lvbihyb3cuY291bnRyeSwgbGF0LCBsbmcpO1xuICAgIGNvbnN0IHJlZ2lvbkFkanVzdGVkID1cbiAgICAgIGJhc2VSZWdpb24gPT09IFwicnVzc2lhXCIgJiYgKGlzQ2hlY2hueWFOYW1lKHJvdy5jaXR5KSB8fCBpc0NoZWNobnlhTmFtZShyb3cuZGlzdHJpY3QpKSA/IFwiY2hlY2hueWFcIiA6IGJhc2VSZWdpb247XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJvdyxcbiAgICAgIHJlZ2lvbjogcmVnaW9uQWRqdXN0ZWRcbiAgICB9O1xuICB9KTtcblxuICBjb25zdCBnZW9oYXNoQnlSZWdpb24gPSBsb2NhdGlvbnMucmVkdWNlPFJlY29yZDxzdHJpbmcsIEFycmF5PHsgZ2VvaGFzaDogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+Pj4oXG4gICAgKGFjYywgcm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGxhdCA9IHR5cGVvZiByb3cubGF0aXR1ZGUgPT09IFwibnVtYmVyXCIgPyByb3cubGF0aXR1ZGUgOiBudWxsO1xuICAgICAgY29uc3QgbG5nID0gdHlwZW9mIHJvdy5sb25naXR1ZGUgPT09IFwibnVtYmVyXCIgPyByb3cubG9uZ2l0dWRlIDogbnVsbDtcbiAgICAgIGlmIChsYXQgPT09IG51bGwgfHwgbG5nID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9XG4gICAgICBjb25zdCByZWdpb24gPSByb3cucmVnaW9uID8/IHJlc29sdmVSZWdpb24ocm93LmNvdW50cnksIGxhdCwgbG5nKTtcbiAgICAgIGNvbnN0IGdlb2hhc2ggPSBlbmNvZGVHZW9oYXNoKGxhdCwgbG5nLCA1KTtcbiAgICAgIGlmICghYWNjW3JlZ2lvbl0pIGFjY1tyZWdpb25dID0gW107XG4gICAgICBjb25zdCBidWNrZXQgPSBhY2NbcmVnaW9uXS5maW5kKChiKSA9PiBiLmdlb2hhc2ggPT09IGdlb2hhc2gpO1xuICAgICAgaWYgKGJ1Y2tldCkge1xuICAgICAgICBidWNrZXQuY291bnQgKz0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjY1tyZWdpb25dLnB1c2goeyBnZW9oYXNoLCBjb3VudDogMSB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICB7fVxuICApO1xuXG4gIE9iamVjdC5rZXlzKGdlb2hhc2hCeVJlZ2lvbikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgZ2VvaGFzaEJ5UmVnaW9uW2tleV0gPSBnZW9oYXNoQnlSZWdpb25ba2V5XS5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG4gIH0pO1xuXG4gIGNvbnN0IGNpdHlDb3VudHNBbGwgPSBPYmplY3QuZW50cmllcyhcbiAgICBsb2NhdGlvbnMucmVkdWNlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KChhY2MsIHJvdzogYW55KSA9PiB7XG4gICAgICBpZiAoIXJvdy5jaXR5KSByZXR1cm4gYWNjO1xuICAgICAgYWNjW3Jvdy5jaXR5XSA9IChhY2Nbcm93LmNpdHldID8/IDApICsgMTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pXG4gIClcbiAgICAubWFwKChbY2l0eSwgY291bnRdKSA9PiAoeyBjaXR5LCBjb3VudCB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuXG4gIGNvbnN0IGRpc3RyaWN0Q291bnRzQWxsID0gT2JqZWN0LmVudHJpZXMoXG4gICAgbG9jYXRpb25zLnJlZHVjZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PigoYWNjLCByb3c6IGFueSkgPT4ge1xuICAgICAgaWYgKCFyb3cuZGlzdHJpY3QpIHJldHVybiBhY2M7XG4gICAgICBhY2Nbcm93LmRpc3RyaWN0XSA9IChhY2Nbcm93LmRpc3RyaWN0XSA/PyAwKSArIDE7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KVxuICApXG4gICAgLm1hcCgoW2Rpc3RyaWN0LCBjb3VudF0pID0+ICh7IGRpc3RyaWN0LCBjb3VudCB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuXG4gIGNvbnN0IGNpdHlDb3VudHNFdXJvcGUgPSBPYmplY3QuZW50cmllcyhcbiAgICBsb2NhdGlvbnMucmVkdWNlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KChhY2MsIHJvdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gcm93LmNvdW50cnk/LnRvVXBwZXJDYXNlKCkgPz8gbnVsbDtcbiAgICAgIGlmICghY29kZSB8fCAhRVVfQ09ERVMuaW5jbHVkZXMoY29kZSkpIHJldHVybiBhY2M7XG4gICAgICBpZiAoIXJvdy5jaXR5KSByZXR1cm4gYWNjO1xuICAgICAgYWNjW3Jvdy5jaXR5XSA9IChhY2Nbcm93LmNpdHldID8/IDApICsgMTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pXG4gIClcbiAgICAubWFwKChbY2l0eSwgY291bnRdKSA9PiAoeyBjaXR5LCBjb3VudCB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuXG4gIGNvbnN0IGRpc3RyaWN0Q291bnRzRXVyb3BlID0gT2JqZWN0LmVudHJpZXMoXG4gICAgbG9jYXRpb25zLnJlZHVjZTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PigoYWNjLCByb3c6IGFueSkgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IHJvdy5jb3VudHJ5Py50b1VwcGVyQ2FzZSgpID8/IG51bGw7XG4gICAgICBpZiAoIWNvZGUgfHwgIUVVX0NPREVTLmluY2x1ZGVzKGNvZGUpKSByZXR1cm4gYWNjO1xuICAgICAgaWYgKCFyb3cuZGlzdHJpY3QpIHJldHVybiBhY2M7XG4gICAgICBhY2Nbcm93LmRpc3RyaWN0XSA9IChhY2Nbcm93LmRpc3RyaWN0XSA/PyAwKSArIDE7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KVxuICApXG4gICAgLm1hcCgoW2Rpc3RyaWN0LCBjb3VudF0pID0+ICh7IGRpc3RyaWN0LCBjb3VudCB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuXG4gIGNvbnN0IGNpdHlDb3VudHNPdGhlciA9IE9iamVjdC5lbnRyaWVzKFxuICAgIGxvY2F0aW9ucy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4oKGFjYywgcm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSByb3cuY291bnRyeT8udG9VcHBlckNhc2UoKSA/PyBudWxsO1xuICAgICAgaWYgKCFjb2RlIHx8IEVVX0NPREVTLmluY2x1ZGVzKGNvZGUpIHx8IGNvZGUgPT09IFwiUlVcIikgcmV0dXJuIGFjYztcbiAgICAgIGlmICghcm93LmNpdHkpIHJldHVybiBhY2M7XG4gICAgICBhY2Nbcm93LmNpdHldID0gKGFjY1tyb3cuY2l0eV0gPz8gMCkgKyAxO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSlcbiAgKVxuICAgIC5tYXAoKFtjaXR5LCBjb3VudF0pID0+ICh7IGNpdHksIGNvdW50IH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG5cbiAgY29uc3QgZGlzdHJpY3RDb3VudHNPdGhlciA9IE9iamVjdC5lbnRyaWVzKFxuICAgIGxvY2F0aW9ucy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4oKGFjYywgcm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGNvZGUgPSByb3cuY291bnRyeT8udG9VcHBlckNhc2UoKSA/PyBudWxsO1xuICAgICAgaWYgKCFjb2RlIHx8IEVVX0NPREVTLmluY2x1ZGVzKGNvZGUpIHx8IGNvZGUgPT09IFwiUlVcIikgcmV0dXJuIGFjYztcbiAgICAgIGlmICghcm93LmRpc3RyaWN0KSByZXR1cm4gYWNjO1xuICAgICAgYWNjW3Jvdy5kaXN0cmljdF0gPSAoYWNjW3Jvdy5kaXN0cmljdF0gPz8gMCkgKyAxO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSlcbiAgKVxuICAgIC5tYXAoKFtkaXN0cmljdCwgY291bnRdKSA9PiAoeyBkaXN0cmljdCwgY291bnQgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KTtcblxuICBjb25zdCBjYWxjQWdlID0gKHZhbHVlPzogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGJpcnRoZGF5ID0gbmV3IERhdGUodmFsdWUpO1xuICAgIGlmIChOdW1iZXIuaXNOYU4oYmlydGhkYXkuZ2V0VGltZSgpKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGxldCBhZ2UgPSB0b2RheS5nZXRGdWxsWWVhcigpIC0gYmlydGhkYXkuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtID0gdG9kYXkuZ2V0TW9udGgoKSAtIGJpcnRoZGF5LmdldE1vbnRoKCk7XG4gICAgaWYgKG0gPCAwIHx8IChtID09PSAwICYmIHRvZGF5LmdldERhdGUoKSA8IGJpcnRoZGF5LmdldERhdGUoKSkpIHtcbiAgICAgIGFnZS0tO1xuICAgIH1cbiAgICByZXR1cm4gYWdlO1xuICB9O1xuXG4gIGNvbnN0IGJ1Y2tldExhYmVsID0gKGFnZTogbnVtYmVyIHwgbnVsbCkgPT4ge1xuICAgIGlmIChhZ2UgPT09IG51bGwgfHwgYWdlIDwgMCkgcmV0dXJuIFwidW5rbm93blwiO1xuICAgIGlmIChhZ2UgPD0gMjQpIHJldHVybiBcIjE4LTI0XCI7XG4gICAgaWYgKGFnZSA8PSAzNCkgcmV0dXJuIFwiMjUtMzRcIjtcbiAgICBpZiAoYWdlIDw9IDQ0KSByZXR1cm4gXCIzNS00NFwiO1xuICAgIGlmIChhZ2UgPD0gNTQpIHJldHVybiBcIjQ1LTU0XCI7XG4gICAgcmV0dXJuIFwiNTUrXCI7XG4gIH07XG5cbiAgY29uc3QgYWdlQnVja2V0cyA9IE9iamVjdC5lbnRyaWVzKFxuICAgIGxvY2F0aW9ucy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4oKGFjYywgcm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGFnZSA9IGNhbGNBZ2Uocm93LmJpcnRoZGF5ID8/IG51bGwpO1xuICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0TGFiZWwoYWdlKTtcbiAgICAgIGFjY1tidWNrZXRdID0gKGFjY1tidWNrZXRdID8/IDApICsgMTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pXG4gIClcbiAgICAubWFwKChbYnVja2V0LCBjb3VudF0pID0+ICh7IGJ1Y2tldCwgY291bnQgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KTtcblxuICBjb25zdCBidWlsZFJlZ2lvbkRldGFpbCA9IChyZWdpb25LZXk6IEdlb1JlZ2lvbikgPT4ge1xuICAgIGNvbnN0IHJvd3MgPSBsb2NhdGlvbnMuZmlsdGVyKChyb3c6IGFueSkgPT4gcm93LnJlZ2lvbiA9PT0gcmVnaW9uS2V5KTtcbiAgICBjb25zdCB0b3RhbCA9IHJvd3MubGVuZ3RoO1xuICAgIGNvbnN0IGZlbWFsZSA9IHJvd3MuZmlsdGVyKChyOiBhbnkpID0+IHIuZ2VuZGVyID09PSBcImZlbWFsZVwiKS5sZW5ndGg7XG4gICAgY29uc3QgbWFsZSA9IHJvd3MuZmlsdGVyKChyOiBhbnkpID0+IHIuZ2VuZGVyID09PSBcIm1hbGVcIikubGVuZ3RoO1xuICAgIGNvbnN0IGFnZU1hcCA9IHJvd3MucmVkdWNlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KChhY2MsIHI6IGFueSkgPT4ge1xuICAgICAgY29uc3QgYWdlID0gY2FsY0FnZShyLmJpcnRoZGF5ID8/IG51bGwpO1xuICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0TGFiZWwoYWdlKTtcbiAgICAgIGFjY1tidWNrZXRdID0gKGFjY1tidWNrZXRdID8/IDApICsgMTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICAgIGNvbnN0IGNpdGllcyA9IE9iamVjdC5lbnRyaWVzKFxuICAgICAgcm93cy5yZWR1Y2U8UmVjb3JkPHN0cmluZywgbnVtYmVyPj4oKGFjYywgcjogYW55KSA9PiB7XG4gICAgICAgIGlmICghci5jaXR5KSByZXR1cm4gYWNjO1xuICAgICAgICBhY2Nbci5jaXR5XSA9IChhY2Nbci5jaXR5XSA/PyAwKSArIDE7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSlcbiAgICApXG4gICAgICAubWFwKChbY2l0eSwgY291bnRdKSA9PiAoeyBjaXR5LCBjb3VudCB9KSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG5cbiAgICBjb25zdCBkaXN0cmljdHMgPSBPYmplY3QuZW50cmllcyhcbiAgICAgIHJvd3MucmVkdWNlPFJlY29yZDxzdHJpbmcsIG51bWJlcj4+KChhY2MsIHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAoIXIuZGlzdHJpY3QpIHJldHVybiBhY2M7XG4gICAgICAgIGFjY1tyLmRpc3RyaWN0XSA9IChhY2Nbci5kaXN0cmljdF0gPz8gMCkgKyAxO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30pXG4gICAgKVxuICAgICAgLm1hcCgoW2Rpc3RyaWN0LCBjb3VudF0pID0+ICh7IGRpc3RyaWN0LCBjb3VudCB9KSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG5cbiAgICBjb25zdCBhZ2VCdWNrZXRzUmVnaW9uID0gT2JqZWN0LmVudHJpZXMoYWdlTWFwKVxuICAgICAgLm1hcCgoW2J1Y2tldCwgY291bnRdKSA9PiAoeyBidWNrZXQsIGNvdW50IH0pKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KTtcblxuICAgIHJldHVybiB7IHRvdGFsLCBmZW1hbGUsIG1hbGUsIGNpdGllcywgZGlzdHJpY3RzLCBhZ2VCdWNrZXRzOiBhZ2VCdWNrZXRzUmVnaW9uIH07XG4gIH07XG5cbiAgY29uc3QgcnVzc2lhRGV0YWlsID0gYnVpbGRSZWdpb25EZXRhaWwoXCJydXNzaWFcIik7XG4gIGNvbnN0IGNoZWNobnlhRGV0YWlsID0gYnVpbGRSZWdpb25EZXRhaWwoXCJjaGVjaG55YVwiKTtcblxuICBjb25zdCBldUNvdW50cnlEZXRhaWxzTWFwID0gKGFsbExvY2F0aW9ucyA/PyBbXSkucmVkdWNlPFJlY29yZDxcbiAgICBzdHJpbmcsXG4gICAgeyBjb3VudHJ5OiBzdHJpbmc7IHRvdGFsOiBudW1iZXI7IGZlbWFsZTogbnVtYmVyOyBtYWxlOiBudW1iZXI7IGFnZU1hcDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB9XG4gID4+KChhY2MsIHJvdzogYW55KSA9PiB7XG4gICAgY29uc3QgY29kZSA9IHJvdy5jb3VudHJ5Py50b1VwcGVyQ2FzZSgpID8/IG51bGw7XG4gICAgaWYgKCFjb2RlIHx8ICFFVV9DT0RFUy5pbmNsdWRlcyhjb2RlKSkgcmV0dXJuIGFjYztcbiAgICBpZiAoIWFjY1tjb2RlXSkge1xuICAgICAgYWNjW2NvZGVdID0geyBjb3VudHJ5OiBjb2RlLCB0b3RhbDogMCwgZmVtYWxlOiAwLCBtYWxlOiAwLCBhZ2VNYXA6IHt9IH07XG4gICAgfVxuICAgIGFjY1tjb2RlXS50b3RhbCArPSAxO1xuICAgIGlmIChyb3cuZ2VuZGVyID09PSBcImZlbWFsZVwiKSBhY2NbY29kZV0uZmVtYWxlICs9IDE7XG4gICAgaWYgKHJvdy5nZW5kZXIgPT09IFwibWFsZVwiKSBhY2NbY29kZV0ubWFsZSArPSAxO1xuICAgIGNvbnN0IGFnZSA9IGNhbGNBZ2Uocm93LmJpcnRoZGF5ID8/IG51bGwpO1xuICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldExhYmVsKGFnZSk7XG4gICAgYWNjW2NvZGVdLmFnZU1hcFtidWNrZXRdID0gKGFjY1tjb2RlXS5hZ2VNYXBbYnVja2V0XSA/PyAwKSArIDE7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuXG4gIGNvbnN0IGV1Q291bnRyeURldGFpbHMgPSBPYmplY3QudmFsdWVzKGV1Q291bnRyeURldGFpbHNNYXApXG4gICAgLm1hcCgoZW50cnkpID0+ICh7XG4gICAgICBjb3VudHJ5OiBlbnRyeS5jb3VudHJ5LFxuICAgICAgdG90YWw6IGVudHJ5LnRvdGFsLFxuICAgICAgZmVtYWxlOiBlbnRyeS5mZW1hbGUsXG4gICAgICBtYWxlOiBlbnRyeS5tYWxlLFxuICAgICAgYWdlQnVja2V0czogT2JqZWN0LmVudHJpZXMoZW50cnkuYWdlTWFwKVxuICAgICAgICAubWFwKChbYnVja2V0LCBjb3VudF0pID0+ICh7IGJ1Y2tldCwgY291bnQgfSkpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcbiAgICB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4gYi50b3RhbCAtIGEudG90YWwpO1xuXG4gIGNvbnN0IGRlbGV0ZWRBY2NvdW50cyA9IDA7XG5cbiAgY29uc3Qgb3RoZXJDb3VudHJ5RGV0YWlsc01hcCA9IChhbGxMb2NhdGlvbnMgPz8gW10pLnJlZHVjZTxSZWNvcmQ8XG4gICAgc3RyaW5nLFxuICAgIHsgY291bnRyeTogc3RyaW5nOyB0b3RhbDogbnVtYmVyOyBmZW1hbGU6IG51bWJlcjsgbWFsZTogbnVtYmVyOyBhZ2VNYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gfVxuICA+PigoYWNjLCByb3c6IGFueSkgPT4ge1xuICAgIGNvbnN0IGNvZGUgPSByb3cuY291bnRyeT8udG9VcHBlckNhc2UoKSA/PyBudWxsO1xuICAgIGlmICghY29kZSB8fCBFVV9DT0RFUy5pbmNsdWRlcyhjb2RlKSB8fCBjb2RlID09PSBcIlJVXCIpIHJldHVybiBhY2M7XG4gICAgaWYgKCFhY2NbY29kZV0pIHtcbiAgICAgIGFjY1tjb2RlXSA9IHsgY291bnRyeTogY29kZSwgdG90YWw6IDAsIGZlbWFsZTogMCwgbWFsZTogMCwgYWdlTWFwOiB7fSB9O1xuICAgIH1cbiAgICBhY2NbY29kZV0udG90YWwgKz0gMTtcbiAgICBpZiAocm93LmdlbmRlciA9PT0gXCJmZW1hbGVcIikgYWNjW2NvZGVdLmZlbWFsZSArPSAxO1xuICAgIGlmIChyb3cuZ2VuZGVyID09PSBcIm1hbGVcIikgYWNjW2NvZGVdLm1hbGUgKz0gMTtcbiAgICBjb25zdCBhZ2UgPSBjYWxjQWdlKHJvdy5iaXJ0aGRheSA/PyBudWxsKTtcbiAgICBjb25zdCBidWNrZXQgPSBidWNrZXRMYWJlbChhZ2UpO1xuICAgIGFjY1tjb2RlXS5hZ2VNYXBbYnVja2V0XSA9IChhY2NbY29kZV0uYWdlTWFwW2J1Y2tldF0gPz8gMCkgKyAxO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcblxuICBjb25zdCBvdGhlckNvdW50cnlEZXRhaWxzID0gT2JqZWN0LnZhbHVlcyhvdGhlckNvdW50cnlEZXRhaWxzTWFwKVxuICAgIC5tYXAoKGVudHJ5KSA9PiAoe1xuICAgICAgY291bnRyeTogZW50cnkuY291bnRyeSxcbiAgICAgIHRvdGFsOiBlbnRyeS50b3RhbCxcbiAgICAgIGZlbWFsZTogZW50cnkuZmVtYWxlLFxuICAgICAgbWFsZTogZW50cnkubWFsZSxcbiAgICAgIGFnZUJ1Y2tldHM6IE9iamVjdC5lbnRyaWVzKGVudHJ5LmFnZU1hcClcbiAgICAgICAgLm1hcCgoW2J1Y2tldCwgY291bnRdKSA9PiAoeyBidWNrZXQsIGNvdW50IH0pKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIudG90YWwgLSBhLnRvdGFsKTtcblxuICBjb25zdCByZXBvcnRlZFVzZXJzID0gT2JqZWN0LnZhbHVlcyhcbiAgICAocmVwb3J0c1JhdyA/PyBbXSkucmVkdWNlPFJlY29yZDxcbiAgICAgIHN0cmluZyxcbiAgICAgIHsgdGFyZ2V0SWQ6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgbGFzdFJlcG9ydGVkQXQ6IHN0cmluZzsgcmVwb3J0ZXJzOiBTZXQ8c3RyaW5nPiB9XG4gICAgPj4oKGFjYywgcm93OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzID0gcm93LnByb3BzID8/IHt9O1xuICAgICAgY29uc3QgdGFyZ2V0SWQgPVxuICAgICAgICBwcm9wcy50YXJnZXRJZCA/P1xuICAgICAgICBwcm9wcy50YXJnZXRfaWQgPz9cbiAgICAgICAgcHJvcHMudGFyZ2V0aWQgPz9cbiAgICAgICAgcHJvcHMudGFyZ2V0ID8/XG4gICAgICAgIHByb3BzLnVzZXJJZCA/P1xuICAgICAgICBwcm9wcy51c2VyX2lkID8/XG4gICAgICAgIG51bGw7XG4gICAgICBpZiAoIXRhcmdldElkKSB7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9XG4gICAgICBjb25zdCBrZXkgPSBTdHJpbmcodGFyZ2V0SWQpO1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhY2Nba2V5XSA/PyB7XG4gICAgICAgIHRhcmdldElkOiBrZXksXG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgICBsYXN0UmVwb3J0ZWRBdDogcm93LmNyZWF0ZWRfYXQsXG4gICAgICAgIHJlcG9ydGVyczogbmV3IFNldDxzdHJpbmc+KClcbiAgICAgIH07XG4gICAgICBleGlzdGluZy5jb3VudCArPSAxO1xuICAgICAgaWYgKCFleGlzdGluZy5sYXN0UmVwb3J0ZWRBdCB8fCBuZXcgRGF0ZShyb3cuY3JlYXRlZF9hdCkgPiBuZXcgRGF0ZShleGlzdGluZy5sYXN0UmVwb3J0ZWRBdCkpIHtcbiAgICAgICAgZXhpc3RpbmcubGFzdFJlcG9ydGVkQXQgPSByb3cuY3JlYXRlZF9hdDtcbiAgICAgIH1cbiAgICAgIGlmIChyb3cudXNlcl9pZCkge1xuICAgICAgICBleGlzdGluZy5yZXBvcnRlcnMuYWRkKFN0cmluZyhyb3cudXNlcl9pZCkpO1xuICAgICAgfVxuICAgICAgYWNjW2tleV0gPSBleGlzdGluZztcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pXG4gIClcbiAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgdGFyZ2V0SWQ6IGl0ZW0udGFyZ2V0SWQsXG4gICAgICBjb3VudDogaXRlbS5jb3VudCxcbiAgICAgIGxhc3RSZXBvcnRlZEF0OiBpdGVtLmxhc3RSZXBvcnRlZEF0LFxuICAgICAgcmVwb3J0ZXJzOiBBcnJheS5mcm9tKGl0ZW0ucmVwb3J0ZXJzKVxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PlxuICAgICAgYi5jb3VudCA9PT0gYS5jb3VudFxuICAgICAgICA/IG5ldyBEYXRlKGIubGFzdFJlcG9ydGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEubGFzdFJlcG9ydGVkQXQpLmdldFRpbWUoKVxuICAgICAgICA6IGIuY291bnQgLSBhLmNvdW50XG4gICAgKTtcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAge1xuICAgICAgZ2VuZGVyLFxuICAgICAgcmVnaW9ucyxcbiAgICAgIGluY29nbml0bzogbWV0cmljcz8uaW5jb2duaXRvID8/IDAsXG4gICAgICBwbGF0Zm9ybSxcbiAgICAgIGNvdW50cnlDb3VudHMsXG4gICAgICBvdGhlckNvdW50cnlDb3VudHMsXG4gICAgICBtYXRjaGVzOiBtYXRjaGVzQ291bnQgPz8gMCxcbiAgICAgIGdlb2hhc2hCeVJlZ2lvbixcbiAgICAgIGNpdHlDb3VudHNBbGwsXG4gICAgICBkaXN0cmljdENvdW50c0FsbCxcbiAgICAgIGNpdHlDb3VudHNFdXJvcGUsXG4gICAgICBkaXN0cmljdENvdW50c0V1cm9wZSxcbiAgICAgIGNpdHlDb3VudHNPdGhlcixcbiAgICAgIGRpc3RyaWN0Q291bnRzT3RoZXIsXG4gICAgICBhZ2VCdWNrZXRzLFxuICAgICAgZXVDb3VudHJ5RGV0YWlscyxcbiAgICAgIG90aGVyQ291bnRyeURldGFpbHMsXG4gICAgICBydXNzaWFEZXRhaWwsXG4gICAgICBjaGVjaG55YURldGFpbCxcbiAgICAgIHRvcEZlbWFsZSxcbiAgICAgIHRvcE1hbGUsXG4gICAgICBkZWxldGVkQWNjb3VudHM6IGRlbGV0ZWRBY2NvdW50cyA/PyAwLFxuICAgICAgcmVwb3J0ZWRVc2Vyc1xuICAgIH0sXG4gICAge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZVwiLFxuICAgICAgICBQcmFnbWE6IFwibm8tY2FjaGVcIixcbiAgICAgICAgRXhwaXJlczogXCIwXCJcbiAgICAgIH1cbiAgICB9XG4gICk7XG59XG5leHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xuZXhwb3J0IGNvbnN0IHJldmFsaWRhdGUgPSAwO1xuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFN1cGFiYXNlU2VydmVyQ2xpZW50IiwiRVVfQ09ERVMiLCJ0b1JhZGlhbnMiLCJ2YWx1ZSIsIk1hdGgiLCJQSSIsImhhdmVyc2luZSIsImxhdDEiLCJsb24xIiwibGF0MiIsImxvbjIiLCJSIiwiZExhdCIsImRMb24iLCJhIiwic2luIiwiY29zIiwiYyIsImF0YW4yIiwic3FydCIsIkdST1pOWV9MQVQiLCJHUk9aTllfTE5HIiwiQ0hFQ0hOWUFfUkFESVVTX0tNIiwicmVzb2x2ZVJlZ2lvbiIsImNvdW50cnkiLCJsYXQiLCJsbmciLCJkaXN0YW5jZSIsInRvVXBwZXJDYXNlIiwiaW5jbHVkZXMiLCJpc0NoZWNobnlhTmFtZSIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsIkJBU0UzMiIsImVuY29kZUdlb2hhc2giLCJsb24iLCJwcmVjaXNpb24iLCJpZHgiLCJiaXQiLCJldmVuQml0IiwiZ2VvaGFzaCIsImxhdE1pbiIsImxhdE1heCIsImxvbk1pbiIsImxvbk1heCIsImxlbmd0aCIsImxvbk1pZCIsImxhdE1pZCIsImNoYXJBdCIsIkdFVCIsInN1cGFiYXNlIiwiZGF0YSIsIm1ldHJpY3MiLCJlcnJvciIsIm1ldHJpY3NFcnJvciIsImV1UHJvZmlsZXMiLCJldUVycm9yIiwib3RoZXJQcm9maWxlcyIsIm90aGVyRXJyb3IiLCJjb3VudCIsIm1hdGNoZXNDb3VudCIsIm1hdGNoZXNFcnJvciIsImFsbExvY2F0aW9ucyIsImxvY2F0aW9uc0Vycm9yIiwicmVwb3J0c1JhdyIsInJlcG9ydHNFcnJvciIsIlByb21pc2UiLCJhbGwiLCJycGMiLCJmcm9tIiwic2VsZWN0IiwiaW4iLCJub3QiLCJqb2luIiwiaGVhZCIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsIm1lc3NhZ2UiLCJqc29uIiwic3RhdHVzIiwiY291bnRyeUNvdW50cyIsIk9iamVjdCIsImVudHJpZXMiLCJyZWR1Y2UiLCJhY2MiLCJyb3ciLCJjb2RlIiwibWFwIiwic29ydCIsImIiLCJvdGhlckNvdW50cnlDb3VudHMiLCJnZW5kZXIiLCJtYWxlIiwiZmVtYWxlIiwibm9uYmluYXJ5IiwidW5rbm93biIsInBsYXRmb3JtIiwiaW9zIiwiYW5kcm9pZCIsInJlZ2lvbnMiLCJpbmd1c2hldGlhIiwiY2hlY2hueWEiLCJydXNzaWEiLCJldXJvcGUiLCJvdGhlciIsInRvcEZlbWFsZSIsIkFycmF5IiwiaXNBcnJheSIsInRvcF9mZW1hbGUiLCJ0b3BNYWxlIiwidG9wX21hbGUiLCJsb2NhdGlvbnMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImJhc2VSZWdpb24iLCJyZWdpb25BZGp1c3RlZCIsImNpdHkiLCJkaXN0cmljdCIsInJlZ2lvbiIsImdlb2hhc2hCeVJlZ2lvbiIsImJ1Y2tldCIsImZpbmQiLCJwdXNoIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJjaXR5Q291bnRzQWxsIiwiZGlzdHJpY3RDb3VudHNBbGwiLCJjaXR5Q291bnRzRXVyb3BlIiwiZGlzdHJpY3RDb3VudHNFdXJvcGUiLCJjaXR5Q291bnRzT3RoZXIiLCJkaXN0cmljdENvdW50c090aGVyIiwiY2FsY0FnZSIsImJpcnRoZGF5IiwiRGF0ZSIsIk51bWJlciIsImlzTmFOIiwiZ2V0VGltZSIsInRvZGF5IiwiYWdlIiwiZ2V0RnVsbFllYXIiLCJtIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiYnVja2V0TGFiZWwiLCJhZ2VCdWNrZXRzIiwiYnVpbGRSZWdpb25EZXRhaWwiLCJyZWdpb25LZXkiLCJyb3dzIiwiZmlsdGVyIiwidG90YWwiLCJyIiwiYWdlTWFwIiwiY2l0aWVzIiwiZGlzdHJpY3RzIiwiYWdlQnVja2V0c1JlZ2lvbiIsInJ1c3NpYURldGFpbCIsImNoZWNobnlhRGV0YWlsIiwiZXVDb3VudHJ5RGV0YWlsc01hcCIsImV1Q291bnRyeURldGFpbHMiLCJ2YWx1ZXMiLCJlbnRyeSIsImRlbGV0ZWRBY2NvdW50cyIsIm90aGVyQ291bnRyeURldGFpbHNNYXAiLCJvdGhlckNvdW50cnlEZXRhaWxzIiwicmVwb3J0ZWRVc2VycyIsInByb3BzIiwidGFyZ2V0SWQiLCJ0YXJnZXRfaWQiLCJ0YXJnZXRpZCIsInRhcmdldCIsInVzZXJJZCIsInVzZXJfaWQiLCJTdHJpbmciLCJleGlzdGluZyIsImxhc3RSZXBvcnRlZEF0IiwiY3JlYXRlZF9hdCIsInJlcG9ydGVycyIsIlNldCIsImFkZCIsIml0ZW0iLCJpbmNvZ25pdG8iLCJtYXRjaGVzIiwiaGVhZGVycyIsIlByYWdtYSIsIkV4cGlyZXMiLCJkeW5hbWljIiwicmV2YWxpZGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/metrics/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-server.ts":
/*!********************************!*\
  !*** ./lib/supabase-server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabaseServerClient: () => (/* binding */ getSupabaseServerClient)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/auth-helpers-nextjs */ \"(rsc)/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst getSupabaseServerClient = ()=>(0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1__.createServerComponentClient)({\n        cookies: next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies\n    }, {\n        supabaseUrl: \"https://chhkvnvwfjldxgyqexjc.supabase.co\",\n        supabaseKey: process.env.SUPABASE_SERVICE_ROLE_KEY\n    });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUM7QUFDcUM7QUFHckUsTUFBTUUsMEJBQTBCLElBQ3JDRCwwRkFBMkJBLENBQ3pCO1FBQUVELE9BQU9BLG1EQUFBQTtJQUFDLEdBQ1Y7UUFDRUcsYUFBYUMsMENBQW9DO1FBQ2pERyxhQUFhSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QjtJQUNwRCxHQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVldG1hdGUtYWRtaW4vLi9saWIvc3VwYWJhc2Utc2VydmVyLnRzPzA5NGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29va2llcyB9IGZyb20gXCJuZXh0L2hlYWRlcnNcIjtcbmltcG9ydCB7IGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCB9IGZyb20gXCJAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqc1wiO1xuaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQgPSAoKSA9PlxuICBjcmVhdGVTZXJ2ZXJDb21wb25lbnRDbGllbnQ8RGF0YWJhc2U+KFxuICAgIHsgY29va2llcyB9LFxuICAgIHtcbiAgICAgIHN1cGFiYXNlVXJsOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgICBzdXBhYmFzZUtleTogcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVxuICAgIH1cbiAgKTtcbiJdLCJuYW1lcyI6WyJjb29raWVzIiwiY3JlYXRlU2VydmVyQ29tcG9uZW50Q2xpZW50IiwiZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/set-cookie-parser","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmetrics%2Froute&page=%2Fapi%2Fmetrics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmetrics%2Froute.ts&appDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshishany%2FDocuments%2Ftschetschenische-dating-app%2Fmeetmate-admin&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();